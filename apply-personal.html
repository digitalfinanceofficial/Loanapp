<!doctype html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Apply — Personal Details | SmartCash</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial}.card{border-radius:1.25rem;box-shadow:0 12px 32px rgba(0,0,0,.06)}.err{display:none}.has-error .err{display:block}</style>
</head><body class="bg-gray-50 text-gray-900">
<header class="bg-white border-b">
  <div class="max-w-5xl mx-auto p-4 flex justify-between items-center">
    <a href="index.html" class="font-extrabold text-blue-700 text-xl">SmartCash</a>
    <div class="text-sm text-gray-600">Step 1 of 4 • Personal</div>
  </div>
</header>

<main class="max-w-5xl mx-auto p-6">
  <section class="bg-white card p-6">
    <h1 class="text-2xl font-extrabold">Personal Details</h1>
    <p class="text-gray-600 text-sm mt-1">Basic information to start your application.</p>

    <form id="f" class="mt-6 grid md:grid-cols-2 gap-4" novalidate>
      <div id="gName"><label class="text-sm font-medium">Full Name</label>
        <input id="name" class="mt-1 w-full border rounded-lg px-3 py-2" placeholder="Your full name" required>
        <p class="err text-xs text-red-600 mt-1">Enter full name (min 3 chars).</p></div>
      <div id="gEmail"><label class="text-sm font-medium">Email</label>
        <input id="email" type="email" class="mt-1 w-full border rounded-lg px-3 py-2" placeholder="name@example.com" required>
        <p class="err text-xs text-red-600 mt-1">Enter a valid email.</p></div>
      <div id="gMob"><label class="text-sm font-medium">Mobile</label>
        <div class="mt-1 flex"><span class="inline-flex items-center px-3 rounded-l-lg border border-r-0 bg-gray-50 text-gray-600">+91</span>
          <input id="mobile" inputmode="numeric" maxlength="10" class="w-full border rounded-r-lg px-3 py-2" placeholder="10-digit number" required></div>
        <p class="err text-xs text-red-600 mt-1">Enter a valid 10-digit mobile.</p></div>
      <div><label class="text-sm font-medium">City</label>
        <input id="city" class="mt-1 w-full border rounded-lg px-3 py-2" placeholder="e.g., Delhi"></div>

      <div class="md:col-span-2 mt-2 flex gap-3">
        <a href="index.html" class="px-4 py-3 rounded-full border">Cancel</a>
        <button class="px-5 py-3 rounded-full bg-[#0A2F33] hover:bg-[#062327] text-white font-semibold">Save & Continue</button>
      </div>
    </form>
  </section>
</main>

<script>
  // Prefill from lead / draft
  const draft = JSON.parse(localStorage.getItem('scf_app_draft')||'{}');
  const lead  = JSON.parse(localStorage.getItem('scf_lead')||'null');
  if(lead){ draft.name= draft.name||lead.name; draft.email=draft.email||lead.email; draft.mobile=(draft.mobile||'').replace('+91','')|| (lead.mobile||'').slice(3); }
  ['name','email','mobile','city'].forEach(k=>{ if(draft[k]) document.getElementById(k).value=draft[k]; });

  const v = {
    name:v=>v.trim().length>=3,
    email:v=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v.trim()),
    mobile:v=>/^[6-9]\d{9}$/.test(v.trim())
  };
  function mark(id,bad){document.getElementById(id).classList.toggle('has-error',bad);}

  document.getElementById('f').addEventListener('submit', e=>{
    e.preventDefault();
    const data = {name:name.value,email:email.value, mobile:mobile.value, city:city.value};
    const ok = v.name(data.name)&&v.email(data.email)&&v.mobile(data.mobile);
    mark('gName',!v.name(data.name)); mark('gEmail',!v.email(data.email)); mark('gMob',!v.mobile(data.mobile));
    if(!ok) return;
    localStorage.setItem('scf_app_draft', JSON.stringify({...draft,...data, mobile:'+91'+data.mobile}));
    location.href='apply-kyc.html';
  });
</script>
</body></html>
